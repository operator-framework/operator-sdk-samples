[ req ]
prompt = no
distinguished_name = dn
req_extensions = v3_req

[ dn ]
CN="{{ cert_common_name }}"
O="{{ cert_org }}"

[ v3_req ]
keyUsage = critical, digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth, clientAuth
subjectAltName = @alt_names

[ alt_names ]
DNS.1 = localhost
DNS.2 = *."{{ etcd_cluster_name }}"."{{ namespace }}".svc
DNS.3 = *."{{ etcd_cluster_name }}"."{{ namespace }}".svc."{{ cert_domain }}"
DNS.4 = "{{ etcd_cluster_name }}"-client
DNS.5 = "{{ etcd_cluster_name }}"-client."{{ namespace }}"
DNS.6 = "{{ etcd_cluster_name }}"-client."{{ namespace }}".svc
DNS.7 = "{{ etcd_cluster_name }}"-client."{{ namespace }}".svc."{{ cert_domain }}"
