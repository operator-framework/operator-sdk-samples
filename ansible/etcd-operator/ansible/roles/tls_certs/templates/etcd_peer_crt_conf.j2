[ req ]
prompt = no
distinguished_name = dn
req_extensions = v3_req

[ dn ]
CN="{{ cert_common_name }}"
O="{{ cert_org }}"

[ v3_req ]
keyUsage = critical, digitalSignature, keyEncipherment
extendedKeyUsage = serverAuth, clientAuth
subjectAltName = @alt_names

[ alt_names ]
DNS.1 = *."{{ etcd_cluster_name }}"."{{ etcd_namespace }}".svc
DNS.2 = *."{{ etcd_cluster_name }}"."{{ etcd_namespace }}".svc."{{ cert_domain }}"
DNS.3 = "{{ etcd_cluster_name }}"."{{ etcd_namespace }}".svc